<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Slides</title>
    <script src="http://code.jquery.com/jquery-latest.min.js"></script>
</head>
<body>
<div class="arts">
    <div class="pics" style="width:200px; height: 150px; background-color: red"></div>
    <div class="pics" style="width:200px; height: 150px; background-color: blue"></div>
    <div class="pics" style="width:200px; height: 150px; background-color: yellow"></div>
    <div class="pics" style="width:200px; height: 150px; background-color: green"></div>
    <div class="pics" style="width:200px; height: 150px; background-color: pink"></div>
</div>
</body>
<script>
	var Slides = function ($element, options) {
		this.$element = $element
		this.options = options
		this.init()
	}
	Slides.prototype.init = function () {
		this.prepareHtml()
		this.bindEvents()
		this.timer = null
	}

	Slides.prototype.bindEvents = function () {
		console.log(this)
      console.log('list',this.$list)
			console.log(this.$prev)
		var self = this
		this.$prev.on('click', function () {
			self.prev()
		})
		this.$next.on('click', function () {
			self.next()
		})
	}
	Slides.prototype.prev = function () {
		this.go(this.current - 1)
	}
	Slides.prototype.next = function () {
		this.go(this.current + 1)
	}
	Slides.prototype.go = function (index) {
		var $pics = this.$pics
		var timer = this.timer
		var $list = this.$list
		if (index < 0) {
			index = $pics.length - 1
		}
		if (index > $pics.length - 1) {
			index = 0
		}
		if (timer) {
			window.clearInterval(timer)
		}
		var self = this
		var left = index * (-200)
		$list.stop(true, true).animate({
			left: left
		}, function () {
			self.current = index
			if (!self.hover) {
				self.autoplay()
			}
		})
	}
	Slides.prototype.autoplay = function () {

	}
	Slides.prototype.prepareHtml = function () {
		var $art = this.$element
		var options = this.options
			var width = options.width
			var height = options.height
			var $pics = this.$pics = $art.children()
				.wrapAll('<div class="list"></div>')
				.css({float: 'left'})

        /* list宽度为图片并排宽度，通过改变其left值改变显示的图片 */
			$list = this.$list = $art.children().wrapAll('<div class="viewpoint"></div>')
			$list.css({
				width: $pics.length * width,
				position: 'relative',
				left: 0
			})

        /* 为list提供容器 */
			var $viewpoint = this.$viewpoint = $list.parent()
			$viewpoint.css({
				width: width,
				height: height,
				overflow: 'hidden'
			})

        /* 通过当前图片的index来计算animate的位置*/
			var current = this.current = 0
			var hover = this.hover = false
			var $next = this.$next = $('<button>next</button>').appendTo($art)
			var $prev = this.$prev = $('<button>prev</button>').appendTo($art)
          this.$prev = $prev
          this.$next = $next
          console.log(1,this.$prev)
	}


	var slides = new Slides($('.arts'), {width: 200, auto: true})


  /*通过计时器和mouseenter事件，增加自动播放和自动悬停功能*/
//	var timer
//	var autoplay = function () {
//		timer = setInterval(function () {
//			go(current + 1)
//		}, 3000)
//	}
//	if (options.auto) {
//		autoplay()
//	}
//	$pics.on('mouseenter', function () {
//		window.clearInterval(timer)
//		hover = true
//	}).on('mouseleave', function () {
//		autoplay()
//		hover = false
////	})
//
//	}
</script>
</html>